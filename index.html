<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç”Ÿæ—¥å¿«ä¹ï¼</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg,#e0f2fe, #7dd3fc);
            text-align: center;
            min-height: 100vh;
            overflow-x: hidden;
            color: #333;
            /* é˜»æ­¢åœ¨æ‰‹æœºä¸Šé•¿æŒ‰æ–‡å­—å¼¹å‡ºèœå•ï¼Œå½±å“äº’åŠ¨ä½“éªŒ */
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }
        #start-btn {
            margin-top: 40vh;
            padding: 15px 30px;
            font-size: 24px;
            background-color: #ff4d4d;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 77, 77, 0.4);
            transition: transform 0.2s;
            z-index: 100;
            position: relative;
        }
        #start-btn:hover {
            transform: scale(1.05);
        }
        #content {
            display: none; 
            padding: 150px 20px 50px 20px;
            animation: fadeIn 2s;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        h1 {
            color: #d63031;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        .message {
            color: #ff6363;
            font-size: 1.5rem;
            margin-bottom: 70px;
        }
        /* è›‹ç³•æ‰è½åŠ¨ç”» */
        .cake {
            position: fixed;
            top: -50px;
            font-size: 30px;
            z-index: 9999;
            pointer-events: none;
            animation: fall linear forwards;
        }
        @keyframes fall {
            to {
                transform: translateY(110vh) rotate(360deg);
            }
        }

        /* --- ä¿¡ä»¶ä¸å¯†ç æ ·å¼ --- */
        #open-letter-btn {
            margin-top: 10px;
            padding: 10px 25px;
            font-size: 18px;
            background-color: #ff4d4d;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(255, 118, 117, 0.4);
            transition: background-color 0.3s;
        }
        #open-letter-btn:hover {
            background-color: #d63031;
        }
        
        /* å¯†ç è¾“å…¥åŒºæ ·å¼ */
        #password-section {
            display: none; 
            margin-top: 20px;
            animation: fadeIn 0.5s;
        }
        .morse-code {
            font-size: 23px;
            color: #000000;
            letter-spacing: 3px;
            margin-bottom: 15px;
        }
        #pwd-input {
            padding: 10px;
            font-size: 16px;
            border: 2px solid #ff4d4d;
            border-radius: 8px;
            width: 150px;
            text-align: center;
            outline: none;
        }
        #submit-pwd-btn {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #ff4d4d;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-left: 10px;
        }

        /* è§£å¯†ç¼“å†²åŠ¨ç”»æ ·å¼ */
        #decrypting-status {
            display: none; 
            color: #d63031;
            font-size: 18px;
            font-weight: bold;
            margin-top: 20px;
        }
        @keyframes blinkDots {
            0% { opacity: 0; }
            50% { opacity: 1; }
            100% { opacity: 0; }
        }
        #decrypting-status span {
            animation: blinkDots 1s infinite;
        }

        #letter-wrapper {
            margin-top: 30px;
            max-height: 0; 
            overflow: hidden;
            transition: max-height 2s ease-in-out; 
            display: flex;
            justify-content: center;
        }
        .letter-content {
            background-color: #fdfbf7; 
            width: 90%;
            max-width: 600px;
            padding: 30px 40px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            text-align: left; 
            color: #2d3436;
            line-height: 1.8; 
            font-size: 18px;
            border: 2px dashed #ff9090; 
            box-sizing: border-box;
        }
        .letter-content p {
            margin-bottom: 15px; 
            text-indent: 2em; 
        }
        .letter-content .greeting {
            text-indent: 0; 
        }
        .letter-content .signature {
            text-align: right; 
            text-indent: 0;
            margin-top: 30px;
        }

        /* --- é•¿æŒ‰è§£é”ç»ˆææƒŠå–œåŒº (ä¿®æ”¹äº†çˆ±å¿ƒæ ·å¼) --- */
        #long-press-area {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px dashed #ccc;
        }
        #press-hint {
            color: #a4b0be;
            font-size: 14px;
            margin-bottom: 15px;
            animation: blinkDots 2s infinite; 
        }
        #heart-btn {
            cursor: pointer;
            display: inline-block;
            color: #ccc; /* åˆå§‹ç°è‰² */
            /* ä½¿ç”¨ filter: drop-shadow æ¥åˆ¶é€ å‘å…‰ï¼Œè€Œä¸æ˜¯ text-shadow */
            transition: transform 0.5s, color 0.5s, filter 0.5s; 
            /* ç¡®ä¿ SVG ç‚¹å‡»æ—¶ä¸äº§ç”Ÿè“è‰²èƒŒæ™¯æ¡† */
            -webkit-tap-highlight-color: transparent;
            padding: 10px; /* å¢åŠ ä¸€ç‚¹ç‚¹å‡»åŒºåŸŸ */
        }
        #heart-btn svg {
            width: 60px; /* è°ƒæ•´çˆ±å¿ƒå¤§å° */
            height: 60px;
            display: block;
        }

        #final-message {
            display: none; 
            margin-top: 15px;
            padding: 25px 20px;
            background-color: #fff0f3;
            border: 2px solid #ffb8c6; /* è¾¹æ¡†ä¹Ÿæ”¹æˆæµ…ç²‰è‰² */
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(255, 184, 198, 0.3); /* æµ…ç²‰è‰²é˜´å½± */
            font-weight: bold;
            color: #d63031;
            font-size: 22px;
            animation: fadeIn 1s;
            text-align: center;
            letter-spacing: 2px;
            line-height: 1.8;
        }
    </style>
</head>
<body>

    <button id="start-btn">å°å°å°å°æœ¨ğŸŒ²ç”Ÿæ—¥å¿«ä¹ ğŸ‚ï¼ï¼ˆç‚¹æˆ‘ï¼‰</button>

    <audio id="bg-music" loop>
        <source src="song.mp3" type="audio/mpeg">
    </audio>

    <div id="content">
        <h1>å¸Œæœ›22å²çš„å°æœ¨å¤©å¤©å¼€å¿ƒï¼Œé¡ºé¡ºåˆ©åˆ©ï¼Œè¶Šæ¥è¶Šå¥½à´¦àµà´¦à´¿áµ”.Ë›.áµ”â‚âœ§</h1>
        <p class="message">æˆ‘ä¼šä¸€ç›´é™ªç€ä½ ï¼Œå˜¿å˜¿å˜¿</p>
        
        <button id="open-letter-btn">ç‚¹æˆ‘ </button>

        <div id="password-section">
            <p id="pwd-hint" style="color: #4d4dff; font-size: 1.1rem; margin-bottom: 5px;">è¯·è¾“å…¥å¯†ç  ğŸ”’</p>
            <div class="morse-code" id="morse-hint">..... / ..--- / -----</div>
            
            <div id="input-area">
                <input type="text" id="pwd-input" placeholder="è¾“å…¥æ•°å­—">
                <button id="submit-pwd-btn">ç¡®è®¤</button>
            </div>

            <div id="decrypting-status">
                ğŸ˜½...<span>...</span>
            </div>
        </div>

        <div id="letter-wrapper">
            <div class="letter-content">
                <p class="greeting">äº²çˆ±çš„å°æœ¨ï¼š</p>
                
                <p>ä½ å¥½å‘€!waggawaggaç°åœ¨å·²è¿‡é›¶ç‚¹ï¼Œæ‰€ä»¥å…ˆè·Ÿä½ è¯´ä¸€å¥ç”Ÿæ—¥å¿«ä¹ã€‚è¿™æ˜¯ä½ ç¬¬ä¸€æ¬¡åœ¨å¤å¤©è¿‡ç”Ÿæ—¥å—ï¼Œæ„Ÿè§‰å¥½å¥‡å¦™ã€‚</p>
                
                <p>å…¶å®çœŸæ­£æƒ³å†™ç‚¹ä»€ä¹ˆçš„æ—¶å€™åå€’ä¸çŸ¥é“è¯´ä»€ä¹ˆï¼ŒåŠ¨å¬çš„ã€ç”¨å¿ƒçš„å·²ç»è¯´è¿‡å¾ˆå¤šï¼Œå†è¯´éš¾å…è…»å‘³ã€‚æˆ‘å–œæ¬¢ä½ çš„å¤©çœŸçƒ‚æ¼«ï¼Œä½ å­©å­æ°”çš„ä¸€é¢æ€»ä»¤æˆ‘å€è§‰å¥½ç©ï¼›ä¹Ÿå–œæ¬¢ä½ æœ‰æ‹…å½“ã€å‹¤æ³è¸å®çš„ä¸€é¢ï¼Œè¿™è®©æˆ‘è§‰å¾—å¯é ã€‚è¿˜æœ‰è„¾æ°”å¥½ã€è€å¿ƒã€åŒ…å®¹ç­‰ç­‰ï¼Œä½ æœ‰å¾ˆå¤šé—ªå…‰çš„åœ°æ–¹ï¼Œè¿™æ—¶å€™ä¸çŸ¥é“å°æœ¨æ˜¯ä¸æ˜¯åˆè¦è¯´ï¼Œæˆ‘å“ªæœ‰ä½ è¯´çš„é‚£ä¹ˆå¥½å’¯ï¼Œé‚£æˆ‘å¯ä¸ç®¡ä½ è¿™å¥è¯æ˜¯å‡ºäºå®³ç¾è¿˜æ˜¯å®¢æ°”ï¼Œåæ­£åœ¨æˆ‘çœ¼é‡Œä½ å¾ˆå¥½å¾ˆå¥½ã€‚</p>
                
                <p>ä½ è¯´ä½ çš„æ—¥å­è¿‡å¾—å¾ˆå¹³æ·¡ï¼Œå¯æ˜¯ç”Ÿæ´»å°±æ˜¯ä¸€å¤©å¤©çš„è¿‡ï¼Œåƒå°æºªæµæ°´ä¸€æ ·ï¼Œé‡åˆ°æ™´å¤©ï¼Œé˜³å…‰æ’’åœ¨æ°´é¢ï¼Œé—ªé—ªå‘å…‰ï¼›é˜´å¤©ä¹Ÿæ²¡å…³ç³»ï¼Œå°æºªä¹Ÿåœ¨æ¶“æ¶“åœ°æµã€‚å¯èƒ½æˆ‘ä»¬ä¸¤ä¸ªå°±åƒå°æºªï¼Œåœ¨æŸä¸ªåœ°æ–¹äº§ç”Ÿäº†äº¤æ±‡ï¼Œä¸¤æ¡å°æºªå¾®ç¬‘ç€æ¡æ¡æ‰‹è¯´ï¼Œä½ å¥½å‘€ï¼Œä½ ä¹Ÿå¥½å‘€ï¼Œå¾ˆé«˜å…´è®¤è¯†ä½ ï¼Œä»æ­¤ä¸¤è‚¡æ°´æµäº§ç”Ÿäº¤æ±‡ï¼Œæˆ‘ä»¬çš„ç”Ÿæ´»äº§ç”Ÿè¶Šæ¥è¶Šå¤§çš„äº¤é›†ï¼Œç„¶åä¸€èµ·æµå‘åŒä¸€ä¸ªåœ°æ–¹ã€‚</p>

                <p>ä¹±ä¸ƒå…«ç³Ÿä¹Ÿä¸çŸ¥é“åœ¨å†™äº›ä»€ä¹ˆï¼Œæˆ‘å¯¹ä½ çš„ç”Ÿæ—¥ç¥æ„¿å¾ˆç®€å•ï¼Œå¥åº·ã€å¹³å®‰ã€é¡ºåˆ©ã€‚å¦‚æœåŠ ä¸Šæˆ‘è‡ªå·±çš„ç§å¿ƒçš„è¯ï¼Œå°æœ¨ï¼Œé™ªæˆ‘å»çœ‹æ»¡å¤©ç¹æ˜Ÿã€‚</p>

                <p>å°±å†™åˆ°è¿™é‡Œï¼Œå†æ¬¡ç¥ä½ ç”Ÿæ—¥å¿«ä¹ï¼Œå°æœ¨å°æœ¨ï¼Œå¬èµ·æ¥åƒå°æ ‘è‹—ä¸€æ ·ï¼Œé‚£å°±æœ€åç¥ä½ èŒå£®æˆé•¿ğŸŒ±ğŸŒ¿ğŸŒ²ï¼ˆä¸‰ä¸ªemojiæ¦‚æ‹¬äº†å°æœ¨çš„æˆé•¿å²ï¼Œé‚£æˆ‘åŠ ä¸€æŸèŠ±é™ªæˆ‘çš„å°æœ¨æˆé•¿ğŸ’ğŸ’ğŸ’ğŸŒ¹ï¼‰ã€‚</p>
                
                <p class="signature">å°å°å°å°ç‹<br>2026å¹´2æœˆ21æ—¥</p>

                <div id="long-press-area">
                    <div id="press-hint"> é•¿æŒ‰çˆ±å¿ƒã¤â™¡âŠ‚</div>
                    <div id="heart-btn">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" fill="currentColor"/>
                        </svg>
                    </div>
                    <div id="final-message">
                        æˆ‘å–œæ¬¢ä½ <br>i miss u so muchâœ¨
                    </div>
                </div>

            </div>
        </div>
    </div> 

    <script>
        const startBtn = document.getElementById('start-btn');
        const content = document.getElementById('content');
        const bgMusic = document.getElementById('bg-music');
        
        const openLetterBtn = document.getElementById('open-letter-btn');
        const letterWrapper = document.getElementById('letter-wrapper');
        const passwordSection = document.getElementById('password-section');
        const pwdInput = document.getElementById('pwd-input');
        const submitPwdBtn = document.getElementById('submit-pwd-btn');
        const inputArea = document.getElementById('input-area');
        const morseHint = document.getElementById('morse-hint');
        const pwdHint = document.getElementById('pwd-hint');
        const decryptingStatus = document.getElementById('decrypting-status');
        
        // é•¿æŒ‰è§£é”ç›¸å…³çš„å…ƒç´ 
        const heartBtn = document.getElementById('heart-btn');
        const finalMessage = document.getElementById('final-message');
        const pressHint = document.getElementById('press-hint');
        
        let isUnlocked = false; 

        // åŸºç¡€é¡µé¢äº¤äº’
        startBtn.addEventListener('click', () => {
            bgMusic.play();
            startBtn.style.display = 'none';
            content.style.display = 'block';
            setInterval(createCake, 300); 
        });

        openLetterBtn.addEventListener('click', () => {
            if (!isUnlocked) {
                openLetterBtn.style.display = 'none';
                passwordSection.style.display = 'block';
            } else {
                if (letterWrapper.style.maxHeight) {
                    letterWrapper.style.maxHeight = null;
                    openLetterBtn.innerText = 'ç‚¹æˆ‘ ğŸ’Œ';
                } else {
                    letterWrapper.style.maxHeight = letterWrapper.scrollHeight + "px";
                    openLetterBtn.innerText = 'æ”¶èµ· ğŸ’Œ';
                }
            }
        });

        submitPwdBtn.addEventListener('click', () => {
            const pwd = pwdInput.value.trim(); 
            if (pwd === '520') {
                inputArea.style.display = 'none';
                morseHint.style.display = 'none';
                pwdHint.innerText = 'å¯†ç æ­£ç¡® ';
                
                decryptingStatus.style.display = 'block';

                setTimeout(() => {
                    isUnlocked = true; 
                    passwordSection.style.display = 'none'; 
                    openLetterBtn.style.display = 'inline-block'; 
                    openLetterBtn.innerText = 'æ”¶èµ· ğŸ’Œ'; 
                    
                    letterWrapper.style.maxHeight = letterWrapper.scrollHeight + "px";
                }, 2500); 

            } else {
                alert('è¾“é”™äº†å°ç³œç³Šâ¦ÖŠâ¦ê§'); 
                pwdInput.value = ''; 
            }
        });

        // è›‹ç³•æ‰è½åŠŸèƒ½
        function createCake() {
            const cake = document.createElement('div');
            cake.classList.add('cake');
            
            const emojis = ['ğŸ°', 'ğŸ‚', 'ğŸ§', 'ğŸˆ', 'âœ¨'];
            cake.innerText = emojis[Math.floor(Math.random() * emojis.length)];
            
            cake.style.left = Math.random() * 100 + 'vw';
            
            const duration = Math.random() * 3 + 3;
            cake.style.animationDuration = duration + 's';
            
            document.body.appendChild(cake);
            
            setTimeout(() => {
                cake.remove();
            }, duration * 1000);
        }

        // --- é•¿æŒ‰çˆ±å¿ƒè§£é”çš„ JavaScript é€»è¾‘ (ä¿®æ”¹äº†é¢œè‰²å’Œé˜´å½±æ•ˆæœ) ---
        let pressTimer;
        let progress = 0;
        let isPressing = false;
        let isUnlockedFinal = false;

        const startPress = (e) => {
            if (isUnlockedFinal) return;
            if(e.cancelable) e.preventDefault(); 
            
            isPressing = true;
            heartBtn.style.transition = 'none'; 
            
            pressTimer = setInterval(() => {
                if (isPressing) {
                    progress += 1; 
                    
                    const scale = 1 + (progress / 100) * 0.6; // ç¨å¾®å‡å°æ”¾å¤§æ¯”ä¾‹
                    
                    // æ ¸å¿ƒä¿®æ”¹ï¼šæŒ‰ä¸‹æ—¶å˜æˆæµ…ç²‰è‰² (#ff9eb3)
                    if (progress > 5) {
                         heartBtn.style.color = '#ff9eb3';
                    }
                    
                    heartBtn.style.transform = `scale(${scale})`;
                    // æ ¸å¿ƒä¿®æ”¹ï¼šä½¿ç”¨æµ…ç²‰è‰²çš„å‘å…‰é˜´å½±
                    heartBtn.style.filter = `drop-shadow(0 0 ${progress/8}px #ff9eb3)`;

                    if (progress >= 100) {
                        unlockFinal();
                    }
                }
            }, 30);
        };

        const endPress = () => {
            if (isUnlockedFinal) return;
            isPressing = false;
            clearInterval(pressTimer);
            progress = 0;
            // æ¾æ‰‹æ—¶å¹³æ»‘å›å¤åŸçŠ¶ï¼ˆç°è‰²ï¼Œæ— å‘å…‰ï¼‰
            heartBtn.style.transition = 'transform 0.5s, color 0.5s, filter 0.5s';
            heartBtn.style.transform = 'scale(1)';
            heartBtn.style.color = '#ccc';
            heartBtn.style.filter = 'none';
        };

        const unlockFinal = () => {
            isUnlockedFinal = true;
            clearInterval(pressTimer);
            
            heartBtn.style.display = 'none'; 
            pressHint.style.display = 'none'; 
            
            finalMessage.style.display = 'block'; 
            
            letterWrapper.style.maxHeight = letterWrapper.scrollHeight + 200 + "px";
        };

        // ç›‘å¬é¼ æ ‡äº‹ä»¶
        heartBtn.addEventListener('mousedown', startPress);
        window.addEventListener('mouseup', endPress);
        heartBtn.addEventListener('mouseleave', endPress);

        // ç›‘å¬è§¦æ‘¸äº‹ä»¶
        heartBtn.addEventListener('touchstart', startPress, {passive: false});
        window.addEventListener('touchend', endPress);
        window.addEventListener('touchcancel', endPress);

    </script>
</body>
</html>